<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Budget Tracker - Smart Money Management</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredericka+the+Great&family=Special+Elite&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Main Colors */
            --primary-color: #2c1810;
            --secondary-color: #594a42;
            --success-color: #2d5a27;
            --danger-color: #8b2e29;
            --warning-color: #8b6e29;
            
            /* Background Colors */
            --bg-paper: #f4e4c1;
            --bg-vintage: #e8d5b7;
            --chalkboard-dark: #2a363b;
            --chalk-white: #f5f5f5;
            --vintage-brown: #8b4513;
            --vintage-cream: #f5f1e8;
            
            /* Effects */
            --vintage-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            --paper-texture: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXWBgYGHh4d5eXlzc3OLi4ubm5uVlZWPj4+NjY19fX2JiYl/f39ra2uRkZGZmZlpaWmXl5dvb29xcXGTk5NnZ2c8TV1mAAAAG3RSTlNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAvEOwtAAAFVklEQVR4XpWWB67c2BUFb3g557T/hRo9/WUMZHlgr4Bg8Z4qQgQJlHI4A8SzFVrapvmTF9O7dmYRFZ60YiBhJRCgh1FYhiLAmdvX0CzTOpNE77ME0Zty/nWWzchDtiqrmQDeuv3powQ5ta2eN0FY0InkqDD73lT9c9lEzwUNqgFHs9VQce3TVClFCQrSTfOiYkVJQBmpbq2L6iZavPnAPcoU0dSw0SUTqz/GtrGuXfbyyBniKykOWQWGqwwMA7QiYAxi+IlPdqo+hYHnUt5ZPfnsHJyNiDtnpJyayNBkF6cWoYGAMY92U2hXHF/C1M8uP/ZtYdiuj26UdAdQQSXQErwSOMzt/XWRWAz5GuSBIkwG1H3FabJ2OsUOUhGC6tK4EMtJO0ttC6IBD3kM0ve0tJwMdSfjZo+EEISaeTr9P3wYrGjXqyC1krcKdhMpxEnt5JetoulscpyzhXN5FRpuPHvbeQaKxFAEB6EN+cYN6xD7RYGpXpNndMmZgM5Dcs3YSNFDHUo2LGfZuukSWyUYirJAdYbF3MfqEKmjM+I2EfhA94iG3L7uKrR+GdWD73ydlIB+6hgref1QTlmgmbM3/LeX5GI1Ux1RWpgxpLuZ2+I+IjzZ8wqE4nilvQdkUdfhzI5QDWy+kw5Wgg2pGpeEVeCCA7b85BO3F9DzxB3cdqvBzWcmzbyMiqhzuYqtHRVG2y4x+KOlnyqla8AoWWpuBoYRxzXrfKuILl6SfiWCbjxoZJUaCBj1CjH7GIaDbc9kqBY3W/Rgjda1iqQcOJu2WW+76pZC9QG7M00dffe9hNnseupFL53r8F7YHSwJWUKP2q+k7RdsxyOB11n0xtOvnW4irMMFNV4H0uqwS5ExsmP9AxbDTc9JwgneAT5vTiUSm1E7BSflSt3bfa1tv8Di3R8n3Af7MNWzs49hmauE2wP+ttrq+AsWpFG2awvsuOqbipWHgtuvuaAE+A1Z/7gC9hesnr+7wqCwG8c5yAg3AL1fm8T9AZtp/bbJGwl1pNrE7RuOX7PeMRUERVaPpEs+yqeoSmuOlokqw49pgomjLeh7icHNlG19yjs6XXOMedYm5xH2YxpV2tc0Ro2jJfxC50ApuxGob7lMsxfTbeUv07TyYxpeLucEH1gNd4IKH2LAg5TdVhlCafZvpskfncCfx8pOhJzd76bJWeYFnFciwcYfubRc12Ip/ppIhA1/mSZ/RxjFDrJC5xifFjJpY2Xl5zXdguFqYyTR1zSp1Y9p+tktDYYSNflcxI0iyO4TPBdlRcpeqjK/piF5bklq77VSEaA+z8qmJTFzIWiitbnzR794USKBUaT0NTEsVjZqLaFVqJoPN9ODG70IPbfBHKK+/q/AWR0tJzYHRULOa4MP+W/HfGadZUbfw177G7j/OGbIs8TahLyynl4X4RinF793Oz+BU0saXtUHrVBFT/DnA3ctNPoGbs4hRIjTok8i+algT1lTHi4SxFvONKNrgQFAq2/gFnWMXgwffgYMJpiKYkmW3tTg3ZQ9Jq+f8XN+A5eeUKHWvJWJ2sgJ1Sop+wwhqFVijqWaJhwtD8MNlSBeWNNWTa5Z5kPZw5+LbVT99wqTdx29lMUH4OIG/D86ruKEauBjvH5xy6um/Sfj7ei6UUVk4AIl3MyD4MSSTOFgSwsH/QJWaQ5as7ZcmgBZkzjjU1UrQ74ci1gWBCSGHtuV1H2mhSnO3Wp/3fEV5a+4wz//6qy8JxjZsmxxy5+4w9CDNJY09T072iKG0EnOS0arEYgXqYnXcYHwjTtUNAcMelOd4xpkoqiTYICWFq0JSiPfPDQdnt+4/wuqcXY47QILbgAAAABJRU5ErkJggg==');
        }

        body {
            /* Light mode background */
            background: linear-gradient(135deg, var(--bg-paper) 0%, var(--bg-vintage) 50%, var(--vintage-cream) 100%);
            color: var(--primary-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            position: relative;
        }

        body.dark-mode {
            /* Dark mode background */
            background: linear-gradient(135deg, #181818 0%, #232526 100%);
            color: var(--chalk-white);
        }

        body.dark-mode .summary-card,
        body.dark-mode .form-section,
        body.dark-mode .transactions-section,
        body.dark-mode .goals-section,
        body.dark-mode .search-section,
        body.dark-mode .reminders-section,
        body.dark-mode .chart-card {
            background: #232526 !important;
            border-color: #444 !important;
            color: var(--chalk-white) !important;
        }

        body:not(.dark-mode) .summary-card,
        body:not(.dark-mode) .form-section,
        body:not(.dark-mode) .transactions-section,
        body:not(.dark-mode) .goals-section,
        body:not(.dark-mode) .search-section,
        body:not(.dark-mode) .reminders-section,
        body:not(.dark-mode) .chart-card {
            background: #fffbe9 !important;
            border-color: #e8d5b7 !important;
            color: var(--primary-color) !important;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: var(--paper-texture);
            opacity: 0.3;
            pointer-events: none;
            z-index: -1;
        }

        body::after {
            /* Financial grid for day mode */
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -2;
            opacity: 0.08;
            pointer-events: none;
            background-image: url("data:image/svg+xml;utf8,<svg width='120' height='120' xmlns='http://www.w3.org/2000/svg'><text x='10' y='40' font-size='32' fill='%238b2e29' font-family='Arial'>&#8377;</text><circle cx='90' cy='90' r='18' fill='%232d5a27' opacity='0.5'/><rect x='60' y='10' width='30' height='10' fill='%238b6e29' opacity='0.5'/><text x='60' y='110' font-size='24' fill='%238b2e29' font-family='Arial'>₹</text></svg>");
            background-repeat: repeat;
            background-size: 120px 120px;
        }

        body.dark-mode::after {
            /* Financial grid for night mode */
            background-image: url("data:image/svg+xml;utf8,<svg width='120' height='120' xmlns='http://www.w3.org/2000/svg'><text x='10' y='40' font-size='32' fill='%23FFD700' font-family='Arial'>&#8377;</text><circle cx='90' cy='90' r='18' fill='%2387CEEB' opacity='0.3'/><rect x='60' y='10' width='30' height='10' fill='%23FFD700' opacity='0.2'/><text x='60' y='110' font-size='24' fill='%23FFD700' font-family='Arial'>₹</text></svg>");
            opacity: 0.10;
        }

        .header {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 1rem 0;
            box-shadow: var(--vintage-shadow);
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            pointer-events: none;
        }

        .nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .logo {
            font-family: 'Fredericka the Great', cursive;
            font-size: 2rem;
            color: var(--chalk-white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--chalk-white), transparent);
        }

        .theme-toggle {
            background: linear-gradient(135deg, var(--vintage-brown) 0%, var(--chalkboard-dark) 100%);
            border: 3px solid var(--chalk-white);
            border-radius: 50px;
            padding: 0.8rem 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .theme-toggle:hover::before {
            transform: translateX(100%);
        }

        .theme-toggle:hover {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
            border-color: #FFD700;
        }

        .theme-icon {
            font-size: 1.3rem;
            color: var(--chalk-white);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover .theme-icon {
            transform: rotate(180deg);
            color: #FFD700;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(139, 69, 19, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(139, 69, 19, 0.05) 0%, transparent 20%);
            pointer-events: none;
            z-index: -1;
        }

        /* Summary Cards */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            padding: 2rem;
            margin-top: 2rem;
            position: relative;
        }

        .summary-card {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            color: var(--chalk-white);
            border: 3px solid var(--secondary-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .summary-card:hover::before {
            transform: translateX(100%);
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .summary-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            color: var(--chalk-white);
        }

        .summary-amount {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin: 1rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .income .summary-amount { 
            color: #98FB98; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .expense .summary-amount { 
            color: #FF6B6B; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .balance .summary-amount { 
            color: #87CEEB; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .savings .summary-amount { 
            color: #FFD700; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Form Section */
        .form-section {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
            position: relative;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            pointer-events: none;
            border-radius: 12px;
        }

        .form-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: var(--chalk-white);
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-family: 'Special Elite', cursive;
            color: var(--chalk-white);
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .form-group label::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            transition: width 0.3s ease;
        }

        .form-group:hover label::after {
            width: 100%;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid var(--chalk-white);
            background: rgba(255, 255, 255, 0.1);
            color: var(--chalk-white);
            border-radius: 8px;
            font-family: 'Special Elite', cursive;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            position: relative;
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #FFD700;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            transform: translateY(-2px);
        }

        .btn {
            font-family: 'Special Elite', cursive;
            padding: 0.8rem 1.5rem;
            border: 3px solid var(--chalk-white);
            background: linear-gradient(135deg, var(--vintage-brown) 0%, var(--chalkboard-dark) 100%);
            color: var(--chalk-white);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            color: var(--chalk-white);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
            border-color: #FFD700;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--success-color) 0%, var(--vintage-brown) 100%);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--vintage-brown) 0%, var(--success-color) 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color) 0%, #2d5a27 100%);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #2d5a27 0%, var(--success-color) 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger-color) 0%, #8b2e29 100%);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #8b2e29 0%, var(--danger-color) 100%);
        }

        /* Transactions Section */
        .transactions-section {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
            position: relative;
        }

        .transactions-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            pointer-events: none;
            border-radius: 12px;
        }

        .transactions-list {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 2rem;
            margin: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            color: var(--chalk-white);
            position: relative;
        }

        .transaction-item {
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .transaction-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--secondary-color), var(--vintage-brown));
            transform: scaleY(0);
            transition: transform 0.3s ease;
            border-radius: 0 2px 2px 0;
        }

        .transaction-item:hover::before {
            transform: scaleY(1);
        }

        .transaction-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .transaction-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .transaction-title {
            font-family: 'Special Elite', cursive;
            font-size: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            color: var(--chalk-white);
        }

        .transaction-category {
            font-size: 0.875rem;
            opacity: 0.8;
            text-transform: capitalize;
            color: var(--chalk-white);
            font-family: 'Special Elite', cursive;
        }

        .transaction-amount {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .transaction-amount.income { 
            color: #98FB98; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .transaction-amount.expense { 
            color: #FF6B6B; 
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .transaction-date {
            font-size: 0.875rem;
            opacity: 0.7;
            color: var(--chalk-white);
            font-family: 'Special Elite', cursive;
        }

        .delete-btn {
            background: linear-gradient(135deg, var(--danger-color) 0%, #8b2e29 100%);
            color: white;
            border: 2px solid var(--danger-color);
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Special Elite', cursive;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #8b2e29 0%, var(--danger-color) 100%);
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            border-color: #FF6B6B;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-vintage);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--chalkboard-dark), var(--vintage-brown));
            border-radius: 6px;
            border: 2px solid var(--bg-vintage);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--vintage-brown), var(--chalkboard-dark));
        }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: var(--chalkboard-dark);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .chart-card {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .chart-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .chart-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }

        .chart-left {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .chart-right {
            display: flex;
            flex-direction: column;
        }

        /* Calendar Styles */
        .calendar {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            height: fit-content;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--chalkboard-dark);
            border: 3px solid var(--secondary-color);
            border-radius: 12px 12px 0 0;
            padding: 1.5rem;
            margin-bottom: 0;
            gap: 1rem;
        }

        body.dark-mode .calendar-header {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .calendar-nav {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .calendar-nav-btn {
            padding: 0.75rem 1rem;
            border: none;
            background: var(--primary-color);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            min-width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .calendar-nav-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .calendar-month {
            font-weight: bold;
            font-size: 1.3rem;
            text-align: center;
            flex: 1;
            color: var(--chalk-white);
            letter-spacing: 0.5px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: var(--chalk-white);
            border-radius: 0 0 12px 12px;
            overflow: hidden;
            border: 1px solid var(--chalk-white);
            border-top: none;
        }

        body.dark-mode .calendar-grid {
            background: var(--chalk-white);
            border-color: var(--chalk-white);
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            font-size: 0.75rem;
            padding: 1rem 0.25rem;
            color: var(--chalk-white);
            background: var(--chalk-white);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--chalk-white);
        }

        body.dark-mode .calendar-day-header {
            background: var(--chalkboard-dark);
            border-bottom-color: var(--chalk-white);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--chalkboard-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            min-height: 40px;
        }

        body.dark-mode .calendar-day {
            background: var(--chalkboard-dark);
        }

        .calendar-day:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
            z-index: 2;
        }

        .calendar-day.other-month {
            opacity: 0.4;
            background: var(--chalk-white);
        }

        body.dark-mode .calendar-day.other-month {
            background: var(--chalkboard-dark);
        }

        .calendar-day.today {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
        }

        .calendar-day.has-transaction {
            background: var(--success-color);
            color: white;
            font-weight: bold;
        }

        .calendar-day.has-expense {
            background: var(--danger-color);
            color: white;
            font-weight: bold;
        }

        .calendar-day.has-income {
            background: var(--warning-color);
            color: white;
            font-weight: bold;
        }

        .calendar-day.has-note {
            position: relative;
        }

        .calendar-day.has-note::after {
            content: '📝';
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.6rem;
            opacity: 0.8;
        }

        .transaction-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        /* Note Modal Styles */
        .note-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .note-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .note-modal-content {
            background: var(--chalkboard-dark);
            border-radius: 12px;
            padding: 2rem;
            max-width: 90%;
            width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
            color: var(--chalk-white);
            border: 3px solid var(--secondary-color);
        }

        body.dark-mode .note-modal-content {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .note-modal.show .note-modal-content {
            transform: scale(1);
        }

        .note-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .note-modal-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--chalk-white);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .note-modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .note-modal-close:hover {
            opacity: 1;
        }

        .note-date {
            font-size: 0.875rem;
            color: var(--chalk-white);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .note-textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 2px solid var(--chalk-white);
            background: rgba(255, 255, 255, 0.1);
            color: var(--chalk-white);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        body.dark-mode .note-textarea {
            border-color: var(--chalk-white);
            background: rgba(255, 255, 255, 0.05);
            color: var(--chalk-white);
        }

        .note-textarea:focus {
            outline: none;
            border-color: #FFD700;
            background: rgba(255, 255, 255, 0.2);
        }

        .note-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: flex-end;
        }

        .note-btn {
            font-family: 'Special Elite', cursive;
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--chalk-white);
            background: transparent;
            color: var(--chalk-white);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .note-btn.save {
            background: var(--success-color);
            color: white;
        }

        .note-btn:hover {
            background: var(--chalk-white);
            color: var(--chalkboard-dark);
            transform: translateY(-2px);
        }

        .note-btn.delete {
            background: var(--danger-color);
            color: white;
        }

        .note-btn.delete:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .note-btn.cancel {
            background: transparent;
            color: var(--chalk-white);
            border: 2px solid var(--chalk-white);
        }

        body.dark-mode .note-btn.cancel {
            color: var(--chalk-white);
            border-color: var(--chalk-white);
        }

        .note-btn.cancel:hover {
            background: var(--chalk-white);
            color: var(--chalkboard-dark);
        }

        body.dark-mode .note-btn.cancel:hover {
            background: var(--chalk-white);
            color: var(--chalkboard-dark);
        }

        /* Pie Chart Styles */
        .pie-chart-container {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto;
        }

        .pie-chart {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            background: conic-gradient(
                var(--primary-color) 0deg 0deg,
                var(--primary-color) 0deg 0deg
            );
            transition: all 0.5s ease;
        }

        .pie-chart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            background: var(--chalkboard-dark);
            border-radius: 50%;
        }

        body.dark-mode .pie-chart::before {
            background: var(--chalkboard-dark);
        }

        .pie-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 0.875rem;
            font-weight: bold;
            color: var(--chalk-white);
        }

        .chart-legend {
            margin-top: 0.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 150px;
            overflow-y: auto;
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .legend-item:hover {
            background: rgba(79, 70, 229, 0.1);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            flex-shrink: 0;
        }

        .legend-text {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .legend-percentage {
            font-weight: bold;
            color: var(--chalk-white);
        }

        /* Time Period Selector */
        .time-selector {
            background: var(--chalkboard-dark);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .time-selector {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .time-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .time-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .time-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--chalk-white);
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--chalk-white);
        }

        body.dark-mode .time-btn {
            border-color: var(--chalk-white);
            color: var(--chalk-white);
        }

        .time-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .time-btn:hover {
            transform: translateY(-2px);
        }

        .current-period {
            font-family: 'Fredericka the Great', cursive;
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--chalk-white);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Budget Goals */
        .goals-section {
            background: var(--chalkboard-dark);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .goals-section {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .goal-card {
            background: var(--chalkboard-dark);
            padding: 1rem;
            border-radius: 8px;
            border: 3px solid var(--secondary-color);
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .goal-card {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .goal-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .goal-category {
            font-weight: 600;
            text-transform: capitalize;
            color: var(--chalk-white);
        }

        .goal-amount {
            font-size: 0.875rem;
            opacity: 0.7;
            color: var(--chalk-white);
        }

        .goal-progress {
            width: 100%;
            height: 8px;
            background: var(--chalk-white);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        body.dark-mode .goal-progress {
            background: var(--chalk-white);
        }

        .goal-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--warning-color));
            transition: width 0.3s ease;
        }

        .goal-bar.over {
            background: var(--danger-color);
        }

        /* Search and Quick Actions */
        .search-section {
            background: var(--chalkboard-dark);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .search-section {
            background: var(--chalkboard-dark);
            border-color: var(--chalk-white);
        }

        .search-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 2px solid var(--chalk-white);
            background: rgba(255, 255, 255, 0.1);
            color: var(--chalk-white);
        }

        body.dark-mode .search-input {
            border-color: var(--chalk-white);
            background: rgba(255, 255, 255, 0.05);
            color: var(--chalk-white);
        }

        .quick-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .quick-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--chalkboard-dark);
            border: 3px solid var(--secondary-color);
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
            color: var(--chalk-white);
        }

        body.dark-mode .notification {
            background: var(--chalkboard-dark);
            border-color: var(--secondary-color);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success-color);
        }

        .notification.warning {
            border-left: 4px solid var(--warning-color);
        }

        .notification.error {
            border-left: 4px solid var(--danger-color);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .notification-title {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        .notification-message {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Reminders Section */
        .reminders-section {
            background: var(--chalkboard-dark);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            color: var(--chalk-white);
        }

        body.dark-mode .reminders-section {
            background: var(--chalkboard-dark);
            border-color: var(--secondary-color);
        }

        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 3px solid var(--secondary-color);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        body.dark-mode .reminder-item {
            border-color: var(--secondary-color);
        }

        .reminder-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .reminder-title {
            font-weight: 600;
            color: var(--chalk-white);
        }

        .reminder-date {
            font-size: 0.875rem;
            opacity: 0.7;
            color: var(--chalk-white);
        }

        .reminder-actions {
            display: flex;
            gap: 0.5rem;
        }

        .reminder-btn {
            padding: 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reminder-btn.complete {
            background: var(--success-color);
            color: white;
        }

        .reminder-btn.delete {
            background: var(--danger-color);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .nav {
                padding: 1rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .filter-buttons {
                justify-content: center;
            }

            .time-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .notification {
                right: 10px;
                left: 10px;
                max-width: none;
            }

            .chart-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .chart-left {
                order: 2;
            }

            .chart-right {
                order: 1;
            }

            .calendar {
                max-width: 100%;
            }

            .calendar-header {
                padding: 1rem;
                gap: 0.5rem;
            }

            .calendar-nav-btn {
                padding: 0.6rem 0.8rem;
                min-width: 40px;
                font-size: 1rem;
            }

            .calendar-month {
                font-size: 1.1rem;
            }

            .calendar-day {
                min-height: 35px;
                font-size: 0.8rem;
            }

            .calendar-day-header {
                font-size: 0.7rem;
                padding: 0.75rem 0.1rem;
            }

            .pie-chart-container {
                width: 150px;
                height: 150px;
            }

            .note-modal-content {
                width: 95%;
                padding: 1.5rem;
            }

            .note-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .note-btn {
                width: 100%;
                padding: 1rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Scrollbar Styling */
        .transactions-list::-webkit-scrollbar {
            width: 12px;
        }

        .transactions-list::-webkit-scrollbar-track {
            background: var(--bg-vintage);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--chalkboard-dark), var(--vintage-brown));
            border-radius: 6px;
            border: 2px solid var(--bg-vintage);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--vintage-brown), var(--chalkboard-dark));
        }

        /* Enhanced Filter Buttons */
        .filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--chalk-white);
            background: linear-gradient(135deg, var(--vintage-brown) 0%, var(--chalkboard-dark) 100%);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--chalk-white);
            font-family: 'Special Elite', cursive;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .filter-btn:hover {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            border-color: #FFD700;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--vintage-brown) 100%);
            color: white;
            border-color: #FFD700;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        /* Vintage Decorative Elements */
        .summary-card::after {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent);
        }

        .form-section::after {
            content: '';
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 30px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--chalk-white), transparent);
        }

        /* Enhanced Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .section-header::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: linear-gradient(90deg, #FFD700, transparent);
        }

        .section-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 1.8rem;
            color: var(--chalk-white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Chart Cards */
        .chart-card {
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--vintage-shadow);
            border: 3px solid var(--secondary-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .chart-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            pointer-events: none;
            border-radius: 12px;
        }

        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .chart-title {
            font-family: 'Fredericka the Great', cursive;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--chalk-white);
            text-align: center;
            letter-spacing: -0.5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* Enhanced Calendar */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px 16px 0 0;
            padding: 1.5rem;
            margin-bottom: 0;
            gap: 1rem;
            position: relative;
        }

        .calendar-nav-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--vintage-brown) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            min-width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .calendar-nav-btn:hover {
            background: linear-gradient(135deg, var(--vintage-brown) 0%, var(--primary-color) 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .calendar-month {
            font-family: 'Fredericka the Great', cursive;
            font-weight: bold;
            font-size: 1.3rem;
            text-align: center;
            flex: 1;
            color: var(--chalk-white);
            letter-spacing: 0.5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Pie Chart */
        .pie-chart {
            width: 180px;
            height: 180px;
            margin: 0 auto;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            position: relative;
            background: conic-gradient(
                var(--primary-color) 0deg 0deg,
                var(--primary-color) 0deg 0deg
            );
            transition: all 0.5s ease;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }

        .pie-chart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .pie-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-family: 'Special Elite', cursive;
            font-size: 1rem;
            color: var(--chalk-white);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Legend */
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Special Elite', cursive;
            font-size: 0.9rem;
            padding: 0.5rem;
            border-radius: 4px;
            color: var(--chalk-white);
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 0.5rem;
        }

        .legend-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 2px;
            flex-shrink: 0;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .legend-percentage {
            font-family: 'Playfair Display', serif;
            color: var(--chalk-white);
            opacity: 0.9;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--chalkboard-dark) 0%, var(--vintage-brown) 100%);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: var(--vintage-shadow);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 300px;
            color: var(--chalk-white);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success-color);
        }

        .notification.warning {
            border-left: 4px solid var(--warning-color);
        }

        .notification.error {
            border-left: 4px solid var(--danger-color);
        }

        .notification-title {
            font-family: 'Special Elite', cursive;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .notification-message {
            font-family: 'Special Elite', cursive;
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Loading Animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-paper) 0%, var(--bg-vintage) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(139, 69, 19, 0.3);
            border-radius: 50%;
            border-top-color: var(--vintage-brown);
            animation: spin 1s linear infinite;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .summary-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .chart-section,
            .transactions-list {
                margin: 1rem;
                padding: 1rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .theme-toggle {
                padding: 0.6rem 1rem;
            }

            .btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
        }

        /* Make select options visible and readable */
        .form-group select, .form-group option {
            background: #2a363b !important; /* dark background */
            color: #fff !important;         /* white text */
        }

        body:not(.dark-mode) .summary-title,
        body:not(.dark-mode) .form-title,
        body:not(.dark-mode) .section-title,
        body:not(.dark-mode) .chart-title {
            color: #8b2e29 !important;
            text-shadow: 0 2px 8px #fffbe9, 0 0 4px #bfa100;
        }

        body:not(.dark-mode) h2.form-title {
            color: #8b2e29 !important;
            text-shadow: 0 2px 8px #fffbe9, 0 0 4px #bfa100;
        }

        /* Improve form label readability in both modes */
        .form-group label {
            font-weight: bold;
            text-shadow: 0 1px 2px #fffbe9, 0 0 2px #bfa100;
        }

        body.dark-mode .form-group label {
            text-shadow: 0 1px 2px #000, 0 0 2px #FFD700;
        }

        body:not(.dark-mode) .form-group label[for="description"],
        body:not(.dark-mode) .form-group label[for="amount"] {
            color: #2d5a27 !important; /* Total Income color */
        }

        body:not(.dark-mode) .form-group label[for="type"],
        body:not(.dark-mode) .form-group label[for="category"] {
            color: #8b2e29 !important; /* Total Expense color */
        }

        body:not(.dark-mode) .form-group input,
        body:not(.dark-mode) .form-group select,
        body:not(.dark-mode) .search-input {
            color: #2c1810 !important; /* dark text */
            background: #fffbe9 !important; /* light background */
            border-color: #8b2e29 !important; /* subtle border for visibility */
        }

        body:not(.dark-mode) .form-group input::placeholder,
        body:not(.dark-mode) .search-input::placeholder {
            color: #8b2e29 !important; /* subtle placeholder color */
            opacity: 0.7;
        }

        /* Blurred financial management background image for both modes */
        .financial-bg-blur {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -3;
            background: url('https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=1200&q=80') center center/cover no-repeat;
            filter: blur(18px) brightness(0.7);
            opacity: 0.45;
            pointer-events: none;
        }

        body.dark-mode .financial-bg-blur {
            filter: blur(18px) brightness(0.4);
            opacity: 0.55;
        }
    </style>
</head>
<body>
    <div class="financial-bg-blur"></div>
    <div class="header">
        <div class="nav">
            <div class="logo">💰 Student Budget Tracker</div>
            <div class="theme-toggle" id="themeToggle">
                <span class="theme-icon">🌙</span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Time Period Selector -->
        <div class="time-selector fade-in">
            <div class="time-controls">
                <div class="time-nav">
                    <button class="time-btn" data-period="week">Week</button>
                    <button class="time-btn active" data-period="month">Month</button>
                    <button class="time-btn" data-period="quarter">Quarter</button>
                    <button class="time-btn" data-period="year">Year</button>
                </div>
                <div class="current-period" id="currentPeriod">December 2024</div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card fade-in">
                <div class="summary-title">Total Income</div>
                <div class="summary-amount income" id="totalIncome">₹0</div>
                <div class="summary-subtitle">This month</div>
            </div>
            <div class="summary-card fade-in">
                <div class="summary-title">Total Expenses</div>
                <div class="summary-amount expense" id="totalExpense">₹0</div>
                <div class="summary-subtitle">This month</div>
            </div>
            <div class="summary-card fade-in">
                <div class="summary-title">Balance</div>
                <div class="summary-amount balance" id="balance">₹0</div>
                <div class="summary-subtitle">Available</div>
            </div>
            <div class="summary-card fade-in">
                <div class="summary-title">Savings Rate</div>
                <div class="summary-amount savings" id="savingsRate">0%</div>
                <div class="summary-subtitle">Of income</div>
            </div>
        </div>

        <!-- Budget Goals -->
        <div class="goals-section fade-in">
            <h2 class="form-title">Budget Goals</h2>
            <div class="goals-grid" id="goalsGrid">
                <!-- Goals will be added here dynamically -->
            </div>
            <button class="btn btn-primary" onclick="budgetTracker.showAddGoalModal()" style="margin-top: 1rem;">
                Add Budget Goal
            </button>
        </div>

        <!-- Search and Quick Actions -->
        <div class="search-section fade-in">
            <div class="search-controls">
                <input type="text" class="search-input" id="searchInput" placeholder="Search transactions...">
                <div class="quick-actions">
                    <button class="quick-btn" onclick="budgetTracker.quickAdd('food', 500)">🍕 Food ₹500</button>
                    <button class="quick-btn" onclick="budgetTracker.quickAdd('transport', 200)">🚌 Transport ₹200</button>
                    <button class="quick-btn" onclick="budgetTracker.quickAdd('entertainment', 300)">🎬 Entertainment ₹300</button>
                    <button class="quick-btn" onclick="budgetTracker.quickAdd('education', 1000)">📚 Education ₹1000</button>
                </div>
            </div>
        </div>

        <!-- Add Transaction Form -->
        <div class="form-section fade-in">
            <h2 class="form-title">Add New Transaction</h2>
            <form id="transactionForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="description">Description</label>
                        <input type="text" id="description" required placeholder="e.g., Groceries, Salary">
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount (₹)</label>
                        <input type="number" id="amount" required placeholder="0.00" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="type">Type</label>
                        <select id="type" required>
                            <option value="">Select type</option>
                            <option value="income">Income</option>
                            <option value="expense">Expense</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" required>
                            <option value="">Select category</option>
                            <option value="food">Food & Dining</option>
                            <option value="transport">Transportation</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="education">Education</option>
                            <option value="health">Healthcare</option>
                            <option value="shopping">Shopping</option>
                            <option value="utilities">Utilities</option>
                            <option value="salary">Salary</option>
                            <option value="freelance">Freelance</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Add Transaction</button>
            </form>
        </div>

        <!-- Transactions List -->
        <div class="transactions-section fade-in">
            <div class="section-header">
                <h2 class="form-title">Recent Transactions</h2>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="income">Income</button>
                    <button class="filter-btn" data-filter="expense">Expenses</button>
                </div>
            </div>
            <div class="transactions-list" id="transactionsList">
                <!-- Transactions will be added here dynamically -->
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-card fade-in">
                <h3 class="chart-title">Expense Breakdown & Calendar</h3>
                <div class="chart-content">
                    <div class="chart-left">
                        <div class="pie-chart-container">
                            <div class="pie-chart" id="expenseChart"></div>
                            <div class="pie-center" id="pieCenter">₹0</div>
                        </div>
                        <div class="chart-legend" id="expenseLegend">
                            <!-- Legend items will be added here -->
                        </div>
                    </div>
                    <div class="chart-right">
                        <div class="calendar" id="monthlyCalendar">
                            <div class="calendar-header">
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn" onclick="budgetTracker.previousMonth()">‹</button>
                                    <button class="calendar-nav-btn" onclick="budgetTracker.nextMonth()">›</button>
                                </div>
                                <div class="calendar-month" id="calendarMonth">December 2024</div>
                            </div>
                            <div class="calendar-grid" id="calendarGrid">
                                <!-- Calendar will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reminders Section -->
        <div class="reminders-section fade-in">
            <h2 class="form-title">Reminders & Bills</h2>
            <div id="remindersList">
                <!-- Reminders will be added here dynamically -->
            </div>
            <button class="btn btn-primary" onclick="budgetTracker.showAddReminderModal()" style="margin-top: 1rem;">
                Add Reminder
            </button>
        </div>
    </div>

            <!-- Notification Container -->
        <div id="notificationContainer"></div>

        <!-- Note Modal -->
        <div class="note-modal" id="noteModal">
            <div class="note-modal-content">
                <div class="note-modal-header">
                    <div class="note-modal-title">Add Note</div>
                    <button class="note-modal-close" onclick="budgetTracker.closeNoteModal()">×</button>
                </div>
                <div class="note-date" id="noteDate">December 15, 2024</div>
                <textarea class="note-textarea" id="noteTextarea" placeholder="Write your note here..."></textarea>
                <div class="note-actions">
                    <button class="note-btn cancel" onclick="budgetTracker.closeNoteModal()">Cancel</button>
                    <button class="note-btn delete" onclick="budgetTracker.deleteNote()" id="deleteNoteBtn" style="display: none;">Delete</button>
                    <button class="note-btn save" onclick="budgetTracker.saveNote()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize the application
        class BudgetTracker {
                    constructor() {
            this.transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            this.goals = JSON.parse(localStorage.getItem('budgetGoals')) || [];
            this.reminders = JSON.parse(localStorage.getItem('reminders')) || [];
            this.notes = JSON.parse(localStorage.getItem('calendarNotes')) || {};
            this.currentFilter = 'all';
            this.currentPeriod = 'month';
            this.currentDate = new Date();
            this.selectedDate = null;
            this.init();
        }

            init() {
                this.setupEventListeners();
                this.loadTheme();
                this.updateUI();
                this.checkReminders();
                this.setupNotifications();
            }

            setupEventListeners() {
                // Form submission
                document.getElementById('transactionForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addTransaction();
                });

                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', () => {
                    this.toggleTheme();
                });

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setFilter(e.target.dataset.filter);
                    });
                });

                // Time period buttons
                document.querySelectorAll('.time-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setTimePeriod(e.target.dataset.period);
                    });
                });

                // Search input
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.searchTransactions(e.target.value);
                });
            }

            addTransaction() {
                const description = document.getElementById('description').value;
                const amount = parseFloat(document.getElementById('amount').value);
                const type = document.getElementById('type').value;
                const category = document.getElementById('category').value;

                if (!description || !amount || !type || !category) {
                    this.showNotification('Error!', 'Please fill in all fields', 'error');
                    return;
                }

                const transaction = {
                    id: Date.now(),
                    description,
                    amount,
                    type,
                    category,
                    date: new Date().toISOString()
                };

                this.transactions.unshift(transaction);
                this.saveTransactions();
                this.updateUI();
                this.resetForm();
                this.showNotification('Success!', 'Transaction added successfully', 'success');
            }

            deleteTransaction(id) {
                this.transactions = this.transactions.filter(t => t.id !== id);
                this.saveTransactions();
                this.updateUI();
            }

            setFilter(filter) {
                this.currentFilter = filter;
                
                // Update active button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
                
                this.updateTransactionsList();
            }

            updateUI() {
                this.updateSummary();
                this.updateTransactionsList();
                this.updateCharts();
                this.updateGoals();
                this.updateReminders();
                this.updateCurrentPeriod();
            }

            updateSummary() {
                const filteredTransactions = this.getFilteredTransactions();
                
                const income = filteredTransactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);

                const expense = filteredTransactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);

                const balance = income - expense;
                const savingsRate = income > 0 ? ((balance / income) * 100).toFixed(1) : 0;

                document.getElementById('totalIncome').textContent = `₹${income.toFixed(2)}`;
                document.getElementById('totalExpense').textContent = `₹${expense.toFixed(2)}`;
                document.getElementById('balance').textContent = `₹${balance.toFixed(2)}`;
                document.getElementById('savingsRate').textContent = `${savingsRate}%`;
            }

            getFilteredTransactions() {
                const now = new Date();
                let startDate = new Date();

                switch (this.currentPeriod) {
                    case 'week':
                        startDate.setDate(now.getDate() - 7);
                        break;
                    case 'month':
                        startDate.setMonth(now.getMonth() - 1);
                        break;
                    case 'quarter':
                        startDate.setMonth(now.getMonth() - 3);
                        break;
                    case 'year':
                        startDate.setFullYear(now.getFullYear() - 1);
                        break;
                }

                return this.transactions.filter(t => {
                    const transactionDate = new Date(t.date);
                    return transactionDate >= startDate && transactionDate <= now;
                });
            }

            updateTransactionsList() {
                const container = document.getElementById('transactionsList');
                let filteredTransactions = this.getFilteredTransactions();
                
                if (this.currentFilter !== 'all') {
                    filteredTransactions = filteredTransactions.filter(t => t.type === this.currentFilter);
                }

                if (filteredTransactions.length === 0) {
                    container.innerHTML = '<p style="text-align: center; opacity: 0.7; padding: 2rem;">No transactions found</p>';
                    return;
                }

                container.innerHTML = filteredTransactions.map(transaction => `
                    <div class="transaction-item fade-in">
                        <div class="transaction-info">
                            <div class="transaction-title">${transaction.description}</div>
                            <div class="transaction-category">${transaction.category}</div>
                            <div class="transaction-date">${new Date(transaction.date).toLocaleDateString()}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div class="transaction-amount ${transaction.type === 'income' ? 'income' : 'expense'}">
                                ${transaction.type === 'income' ? '+' : '-'}₹${transaction.amount.toFixed(2)}
                            </div>
                            <button class="delete-btn" onclick="budgetTracker.deleteTransaction(${transaction.id})">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            updateCharts() {
                this.updateExpenseChart();
                this.updateCalendar();
            }

            updateExpenseChart() {
                const expenses = this.getFilteredTransactions().filter(t => t.type === 'expense');
                const categoryTotals = {};

                expenses.forEach(expense => {
                    categoryTotals[expense.category] = (categoryTotals[expense.category] || 0) + expense.amount;
                });

                const categories = Object.keys(categoryTotals);
                const amounts = Object.values(categoryTotals);
                const total = amounts.reduce((sum, amount) => sum + amount, 0);

                // Update pie chart center
                document.getElementById('pieCenter').textContent = `₹${total.toFixed(0)}`;

                if (total === 0) {
                    document.getElementById('expenseChart').style.background = 'conic-gradient(var(--chalk-white) 0deg 360deg)';
                    document.getElementById('expenseLegend').innerHTML = '<p style="text-align: center; opacity: 0.7;">No expenses to display</p>';
                    return;
                }

                // Generate pie chart gradient
                const colors = ['#2c1810', '#594a42', '#2d5a27', '#8b6e29', '#8b2e29', '#8b5cf6', '#ec4899'];
                let currentAngle = 0;
                let gradientParts = [];

                categories.forEach((category, index) => {
                    const percentage = (categoryTotals[category] / total) * 100;
                    const angle = (percentage / 100) * 360;
                    const color = colors[index % colors.length];
                    
                    gradientParts.push(`${color} ${currentAngle}deg ${currentAngle + angle}deg`);
                    currentAngle += angle;
                });

                const gradient = `conic-gradient(${gradientParts.join(', ')})`;
                document.getElementById('expenseChart').style.background = gradient;

                // Update legend
                const legendHTML = categories.map((category, index) => {
                    const percentage = ((categoryTotals[category] / total) * 100).toFixed(1);
                    const color = colors[index % colors.length];
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background: ${color}"></div>
                            <div class="legend-text">
                                <span>${category}</span>
                                <span class="legend-percentage">${percentage}%</span>
                            </div>
                        </div>
                    `;
                }).join('');

                document.getElementById('expenseLegend').innerHTML = legendHTML;
            }

            // Calendar Management
            updateCalendar() {
                this.renderCalendar();
            }

            renderCalendar() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                // Update calendar header
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                                   'July', 'August', 'September', 'October', 'November', 'December'];
                document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;

                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                const calendarGrid = document.getElementById('calendarGrid');
                calendarGrid.innerHTML = '';

                // Add day headers
                const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayHeaders.forEach(day => {
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'calendar-day-header';
                    dayHeader.textContent = day;
                    calendarGrid.appendChild(dayHeader);
                });

                // Generate calendar days
                const today = new Date();
                const currentMonthTransactions = this.getTransactionsForMonth(year, month + 1);

                for (let i = 0; i < 42; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);

                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = currentDate.getDate();

                    // Check if it's today
                    if (currentDate.toDateString() === today.toDateString()) {
                        dayElement.classList.add('today');
                    }

                    // Check if it's current month
                    if (currentDate.getMonth() !== month) {
                        dayElement.classList.add('other-month');
                    }

                    // Check for notes on this day
                    const dateKey = currentDate.toISOString().split('T')[0];
                    if (this.notes[dateKey]) {
                        dayElement.classList.add('has-note');
                    }

                    // Check for transactions on this day
                    const dayTransactions = currentMonthTransactions.filter(t => {
                        const transactionDate = new Date(t.date);
                        return transactionDate.toDateString() === currentDate.toDateString();
                    });

                    if (dayTransactions.length > 0) {
                        const hasIncome = dayTransactions.some(t => t.type === 'income');
                        const hasExpense = dayTransactions.some(t => t.type === 'expense');
                        
                        if (hasIncome && hasExpense) {
                            dayElement.classList.add('has-transaction');
                        } else if (hasIncome) {
                            dayElement.classList.add('has-income');
                        } else if (hasExpense) {
                            dayElement.classList.add('has-expense');
                        }
                    }

                    // Add click event for notes and calendar
                    dayElement.addEventListener('click', () => {
                        this.handleDayClick(currentDate);
                    });

                    calendarGrid.appendChild(dayElement);
                }
            }

            getTransactionsForMonth(year, month) {
                return this.transactions.filter(t => {
                    const transactionDate = new Date(t.date);
                    return transactionDate.getFullYear() === year && 
                           transactionDate.getMonth() === month - 1;
                });
            }

            previousMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() - 1);
                this.updateCalendar();
            }

            nextMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() + 1);
                this.updateCalendar();
            }

            handleDayClick(date) {
                this.selectedDate = date;
                const dateKey = date.toISOString().split('T')[0];
                
                // Check if there's a note for this date
                if (this.notes[dateKey]) {
                    // Show existing note
                    this.showNoteModal(date, this.notes[dateKey]);
                } else {
                    // Show empty note modal
                    this.showNoteModal(date, '');
                }
            }

            showNoteModal(date, noteText) {
                const dateKey = date.toISOString().split('T')[0];
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });

                document.getElementById('noteDate').textContent = formattedDate;
                document.getElementById('noteTextarea').value = noteText;
                
                // Show/hide delete button based on whether note exists
                const deleteBtn = document.getElementById('deleteNoteBtn');
                if (noteText.trim()) {
                    deleteBtn.style.display = 'block';
                } else {
                    deleteBtn.style.display = 'none';
                }

                // Show modal
                document.getElementById('noteModal').classList.add('show');
            }

            closeNoteModal() {
                document.getElementById('noteModal').classList.remove('show');
                this.selectedDate = null;
            }

            saveNote() {
                if (!this.selectedDate) return;

                const noteText = document.getElementById('noteTextarea').value.trim();
                const dateKey = this.selectedDate.toISOString().split('T')[0];

                if (noteText) {
                    this.notes[dateKey] = noteText;
                    this.saveNotes();
                    this.showNotification('Note Saved!', 'Your note has been saved successfully.', 'success');
                } else {
                    // If note is empty, delete it
                    delete this.notes[dateKey];
                    this.saveNotes();
                    this.showNotification('Note Deleted!', 'Empty note has been removed.', 'success');
                }

                this.closeNoteModal();
                this.updateCalendar();
            }

            deleteNote() {
                if (!this.selectedDate) return;

                const dateKey = this.selectedDate.toISOString().split('T')[0];
                delete this.notes[dateKey];
                this.saveNotes();
                
                this.showNotification('Note Deleted!', 'Note has been deleted successfully.', 'success');
                this.closeNoteModal();
                this.updateCalendar();
            }

            saveNotes() {
                localStorage.setItem('calendarNotes', JSON.stringify(this.notes));
            }

            openPhoneCalendar(date) {
                // Format date for calendar URL
                const formattedDate = date.toISOString().split('T')[0];
                
                // Try to open phone calendar
                try {
                    // For mobile devices, try to open native calendar
                    if (navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)) {
                        // Create a calendar event URL
                        const calendarUrl = `calshow://${formattedDate}`;
                        window.location.href = calendarUrl;
                    } else {
                        // For desktop, open Google Calendar
                        const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=Budget+Check&dates=${formattedDate}/${formattedDate}`;
                        window.open(googleCalendarUrl, '_blank');
                    }
                } catch (error) {
                    // Fallback to Google Calendar
                    const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=Budget+Check&dates=${formattedDate}/${formattedDate}`;
                    window.open(googleCalendarUrl, '_blank');
                }

                // Show notification
                this.showNotification('Calendar Opened!', `Opening calendar for ${date.toLocaleDateString()}`, 'success');
            }

            // Time Period Management
            setTimePeriod(period) {
                this.currentPeriod = period;
                
                // Update active button
                document.querySelectorAll('.time-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-period="${period}"]`).classList.add('active');
                
                this.updateUI();
            }

            updateCurrentPeriod() {
                const now = new Date();
                let periodText = '';
                
                switch (this.currentPeriod) {
                    case 'week':
                        periodText = `Week of ${now.toLocaleDateString()}`;
                        break;
                    case 'month':
                        periodText = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                        break;
                    case 'quarter':
                        const quarter = Math.ceil((now.getMonth() + 1) / 3);
                        periodText = `Q${quarter} ${now.getFullYear()}`;
                        break;
                    case 'year':
                        periodText = now.getFullYear().toString();
                        break;
                }
                
                document.getElementById('currentPeriod').textContent = periodText;
            }

            // Search Functionality
            searchTransactions(query) {
                const searchInput = document.getElementById('searchInput');
                const filteredTransactions = this.getFilteredTransactions().filter(t => 
                    t.description.toLowerCase().includes(query.toLowerCase()) ||
                    t.category.toLowerCase().includes(query.toLowerCase())
                );
                
                this.displaySearchResults(filteredTransactions);
            }

            displaySearchResults(transactions) {
                const container = document.getElementById('transactionsList');
                
                if (transactions.length === 0) {
                    container.innerHTML = '<p style="text-align: center; opacity: 0.7; padding: 2rem;">No matching transactions found</p>';
                    return;
                }

                container.innerHTML = transactions.map(transaction => `
                    <div class="transaction-item fade-in">
                        <div class="transaction-info">
                            <div class="transaction-title">${transaction.description}</div>
                            <div class="transaction-category">${transaction.category}</div>
                            <div class="transaction-date">${new Date(transaction.date).toLocaleDateString()}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div class="transaction-amount ${transaction.type === 'income' ? 'income' : 'expense'}">
                                ${transaction.type === 'income' ? '+' : '-'}₹${transaction.amount.toFixed(2)}
                            </div>
                            <button class="delete-btn" onclick="budgetTracker.deleteTransaction(${transaction.id})">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Quick Add Functionality
            quickAdd(category, amount) {
                const description = this.getQuickAddDescription(category);
                const transaction = {
                    id: Date.now(),
                    description,
                    amount,
                    type: 'expense',
                    category,
                    date: new Date().toISOString()
                };

                this.transactions.unshift(transaction);
                this.saveTransactions();
                this.updateUI();
                this.showNotification('Transaction added!', 'Quick expense added successfully.', 'success');
            }

            getQuickAddDescription(category) {
                const descriptions = {
                    food: 'Quick Food Expense',
                    transport: 'Quick Transport Expense',
                    entertainment: 'Quick Entertainment Expense',
                    education: 'Quick Education Expense'
                };
                return descriptions[category] || 'Quick Expense';
            }

            // Budget Goals Management
            updateGoals() {
                const container = document.getElementById('goalsGrid');
                
                if (this.goals.length === 0) {
                    container.innerHTML = '<p style="text-align: center; opacity: 0.7; grid-column: 1/-1;">No budget goals set. Add your first goal!</p>';
                    return;
                }

                container.innerHTML = this.goals.map(goal => {
                    const spent = this.getFilteredTransactions()
                        .filter(t => t.type === 'expense' && t.category === goal.category)
                        .reduce((sum, t) => sum + t.amount, 0);
                    
                    const percentage = Math.min((spent / goal.amount) * 100, 100);
                    const isOver = spent > goal.amount;
                    
                    return `
                        <div class="goal-card fade-in">
                            <div class="goal-header">
                                <div class="goal-category">${goal.category}</div>
                                <div class="goal-amount">₹${spent.toFixed(2)} / ₹${goal.amount.toFixed(2)}</div>
                            </div>
                            <div class="goal-progress">
                                <div class="goal-bar ${isOver ? 'over' : ''}" style="width: ${percentage}%"></div>
                            </div>
                            <button class="delete-btn" onclick="budgetTracker.deleteGoal('${goal.id}')" style="margin-top: 0.5rem;">Delete</button>
                        </div>
                    `;
                }).join('');
            }

            showAddGoalModal() {
                const category = prompt('Enter category for budget goal:');
                if (!category) return;
                
                const amount = parseFloat(prompt('Enter budget amount:'));
                if (!amount || amount <= 0) return;

                const goal = {
                    id: Date.now().toString(),
                    category: category.toLowerCase(),
                    amount: amount
                };

                this.goals.push(goal);
                this.saveGoals();
                this.updateUI();
                this.showNotification('Goal added!', `Budget goal for ${category} set to ₹${amount}.`, 'success');
            }

            deleteGoal(id) {
                this.goals = this.goals.filter(g => g.id !== id);
                this.saveGoals();
                this.updateUI();
                this.showNotification('Goal deleted!', 'Budget goal removed successfully.', 'success');
            }

            saveGoals() {
                localStorage.setItem('budgetGoals', JSON.stringify(this.goals));
            }

            // Reminders Management
            updateReminders() {
                const container = document.getElementById('remindersList');
                
                if (this.reminders.length === 0) {
                    container.innerHTML = '<p style="text-align: center; opacity: 0.7;">No reminders set. Add your first reminder!</p>';
                    return;
                }

                container.innerHTML = this.reminders.map(reminder => `
                    <div class="reminder-item fade-in">
                        <div class="reminder-info">
                            <div class="reminder-title">${reminder.title}</div>
                            <div class="reminder-date">Due: ${new Date(reminder.dueDate).toLocaleDateString()}</div>
                        </div>
                        <div class="reminder-actions">
                            <button class="reminder-btn complete" onclick="budgetTracker.completeReminder('${reminder.id}')">✓</button>
                            <button class="reminder-btn delete" onclick="budgetTracker.deleteReminder('${reminder.id}')">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            showAddReminderModal() {
                const title = prompt('Enter reminder title:');
                if (!title) return;
                
                const dueDate = prompt('Enter due date (YYYY-MM-DD):');
                if (!dueDate) return;

                const reminder = {
                    id: Date.now().toString(),
                    title,
                    dueDate,
                    completed: false
                };

                this.reminders.push(reminder);
                this.saveReminders();
                this.updateUI();
                this.showNotification('Reminder added!', `Reminder "${title}" set for ${dueDate}.`, 'success');
            }

            completeReminder(id) {
                this.reminders = this.reminders.filter(r => r.id !== id);
                this.saveReminders();
                this.updateUI();
                this.showNotification('Reminder completed!', 'Reminder marked as completed.', 'success');
            }

            deleteReminder(id) {
                this.reminders = this.reminders.filter(r => r.id !== id);
                this.saveReminders();
                this.updateUI();
                this.showNotification('Reminder deleted!', 'Reminder removed successfully.', 'success');
            }

            saveReminders() {
                localStorage.setItem('reminders', JSON.stringify(this.reminders));
            }

            checkReminders() {
                const today = new Date();
                const dueReminders = this.reminders.filter(r => {
                    const dueDate = new Date(r.dueDate);
                    const diffTime = dueDate - today;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return diffDays <= 3 && diffDays >= 0;
                });

                dueReminders.forEach(reminder => {
                    const dueDate = new Date(reminder.dueDate);
                    const diffTime = dueDate - today;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 0) {
                        this.showNotification('Reminder Due Today!', `"${reminder.title}" is due today!`, 'warning');
                    } else if (diffDays <= 3) {
                        this.showNotification('Reminder Due Soon!', `"${reminder.title}" is due in ${diffDays} days.`, 'warning');
                    }
                });
            }

            // Notification System
            setupNotifications() {
                // Check for overdue reminders every hour
                setInterval(() => {
                    this.checkReminders();
                }, 60 * 60 * 1000);
            }

            showNotification(title, message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-header">
                        <div class="notification-title">${title}</div>
                        <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
                    </div>
                    <div class="notification-message">${message}</div>
                `;

                document.getElementById('notificationContainer').appendChild(notification);
                
                // Show notification
                setTimeout(() => {
                    notification.classList.add('show');
                }, 100);

                // Auto remove after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 5000);
            }

            resetForm() {
                document.getElementById('transactionForm').reset();
            }

            saveTransactions() {
                localStorage.setItem('transactions', JSON.stringify(this.transactions));
            }

            toggleTheme() {
                document.body.classList.toggle('dark-mode');
                const themeIcon = document.querySelector('.theme-icon');
                themeIcon.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            }

            loadTheme() {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    document.querySelector('.theme-icon').textContent = '☀️';
                }
            }
        }

        // Initialize the budget tracker
        const budgetTracker = new BudgetTracker();

        // Remove automatic sample data generation - users will add their own transactions
    </script>
</body>
</html> 